III. MÔ HÌNH HÓA YÊU CẦU

Bảng danh sách yêu cầu:
STT  Tên yêu cầu                          Mô tả chi tiết yêu cầu                                                                 Ai phụ trách        Ghi chú
1    Tạo sân, chỉnh sửa thông tin sân     Đăng nhập, chọn "Tạo sân", điền thông tin, xác nhận.                                 Chủ sân            Đảm bảo thông tin đầy đủ cho người thuê.
2    Quản lý lịch đặt sân                 Tạo, chỉnh sửa, hủy lịch; hiển thị tình trạng sân theo thời gian thực.               Chủ sân            Tự động gửi thông báo, ngăn trùng lịch.
3    Quản lý doanh thu và lịch sử đặt sân Xem doanh thu, lịch sử giao dịch; xuất báo cáo Excel/PDF.                            Chủ sân            Chính sách hoàn tiền rõ ràng.
4    Chat trực tuyến                      Sử dụng chat để chủ sân và khách hàng trò chuyện.                                    Chủ sân/Người thuê Đảm bảo thông tin kịp thời.
5    Đăng ký và quản lý tài khoản         Đăng ký qua email, số điện thoại, mạng xã hội; cập nhật thông tin cá nhân.           Người thuê, chủ sân Tăng cường bảo mật.
6    Tìm kiếm và lọc sân                  Tìm theo địa điểm, loại sân, giá, tiện ích; hiển thị danh sách sân phù hợp.          Người thuê         Giúp dễ dàng tìm sân phù hợp.
7    Đặt sân và thanh toán                Chọn sân, thời gian, thanh toán trực tuyến; xác nhận qua email/SMS.                  Người thuê         Chính sách hoàn tiền rõ ràng.
8    Đánh giá và nhận xét                 Đánh giá sao, nhận xét chi tiết; hiển thị đánh giá trung bình.                       Người thuê         Tăng tính minh bạch.
9    Quản lý lịch sử đặt sân              Xem, hủy, thay đổi lịch sử đặt sân; ghi chú trạng thái giao dịch.                    Người thuê         Theo dõi lịch sử sử dụng.
10   Trợ giúp khách hàng                  Chat trực tuyến, mẫu liên hệ, FAQ.                                                  Chủ sân/Người thuê Nhận trợ giúp nhanh chóng.

1. Quản lý thông tin sân
Biểu mẫu:
BM1 Tạo/Chỉnh sửa thông tin sân
Tên sân: ... | Loại sân: ... | Địa điểm: ... | TT giới thiệu: ...
Giá thuê: ... | Thời gian hoạt động: ... | Tiện ích: ... | TT chủ sân: ...

Bảng quy định:
QD1.1: Địa điểm chi tiết gồm số nhà, tên đường.
QD1.2: Phường/xã, quận/huyện, TP/tỉnh phải hợp lệ.

Sơ đồ DFD:
Mô tả các luồng dữ liệu:
D1: Tên sân, loại sân, địa chỉ, giá, giờ hoạt động, thông tin tiện ích.
D2: Không có
D3: Danh sách tỉnh (thành), quận (huyện), xã (phường)
D4: D1
D5: D4
D6: Không có

Thuật toán:
B1: Nhận D1 từ người dùng
B2: Kết nối cơ sở dữ liệu
B3: Đọc D3 từ bộ nhớ phụ
B4: Kiểm tra (D1) có đầy đủ thông tin không, các phường xã, quận huyện, tỉnh Tp có hợp lệ không.
B5: Nếu không thỏa mãn các điều kiện trên thì đến B8
B6: Lưu D4 xuống bộ nhớ phụ
B7: Xuất D5 ra máy in
B8: Đóng kết nối cơ sở dữ liệu
B9: Kết thúc

2. Quản lý lịch đặt sân
Biểu mẫu:
BM2 Quản lý lịch đặt sân
Tên sân: ... | Loại sân: ... | Địa điểm: ... | Khung giờ: ...
Giá thuê: ... | Thời gian hoạt động: ... | Chính sách hủy: ... | Tiện ích: ...

Bảng quy định:
QD2.1: Giờ đặt sân phải nằm trong khung giờ hoạt động của sân.
QD2.2: Không cho phép đặt trùng lịch.

Sơ đồ DFD:
Mô tả các luồng dữ liệu:
D1: Tên sân, loại sân, địa chỉ, giá, giờ hoạt động, thông tin tiện ích.
D2: Không có
D3: Danh sách tỉnh (thành), quận (huyện), xã (phường)
D4: D1
D5: D4
D6: Không có

Thuật toán:
B1: Nhận D1 từ người dùng
B2: Kết nối cơ sở dữ liệu
B3: Đọc D3 từ bộ nhớ phụ
B4: Kiểm tra (D1) có nằm trong thời gian hoạt động của sân và không bị trùng lịch hay không
B5: Nếu không thỏa mãn các điều kiện trên thì đến B8
B6: Lưu D4 xuống bộ nhớ phụ
B7: Xuất D5 ra máy in
B8: Đóng kết nối cơ sở dữ liệu
B9: Kết thúc

3. Báo cáo doanh thu và chi tiết lịch sử đặt sân
Biểu mẫu:
BM3.1 Báo cáo doanh thu
Thời gian bắt đầu: ... | Thời gian kết thúc: ...
Tổng số lượt đặt sân: ... | Tổng doanh thu: ... | Doanh thu trung bình/ngày: ...

BM3.2 Chi tiết lịch sử đặt sân
Thời gian đặt sân: ... | Khung thời gian đặt: ...
Người đặt sân: ... | Doanh thu: ... | Phương thức thanh toán: ...

Sơ đồ DFD:
Mô tả các luồng dữ liệu:
D1: Thời gian bắt đầu -> Thời gian kết thúc
D2: Không có
D3: Danh sách lịch sử đặt sân và doanh thu trong khoảng thời gian D1
D4: D1 + Thông tin thống kê tổng số lượt đặt sân và doanh thu
D5: D4
D6: D5

Thuật toán:
B1: Nhận D1 từ người dùng
B2: Kết nối cơ sở dữ liệu.
B3: Đọc D3 từ bộ nhớ phụ.
B4: Lọc danh sách đặt sân theo D1 và lấy các thông tin chi tiết, tính toán số lượt đặt sân và doanh thu
B5: Lưu D4 vào bộ nhớ phụ.
B6: Xuất D5 ra thiết bị xuất
B7: Trả D6 cho người dùng
B8: Đóng kết nối cơ sở dữ liệu.
B9: Kết thúc.

4. Chat trực tuyến
Biểu mẫu:
Bảng quy định:
Mô tả các luồng dữ liệu:
D1: Thông tin chủ sân, khách hàng, thời gian, nội dung chat, tệp đính kèm.
D2: Không có
D3: Lịch sử tin nhắn giữa khách hàng và chủ sân.
D4: Tin nhắn mới + Lịch sử tin nhắn giữa khách hàng và chủ sân.
D5: D4
D6: D5

Thuật toán:
B1: Nhận D1 từ người dùng (Tin nhắn từ chủ sân hoặc khách hàng).
B2: Kết nối cơ sở dữ liệu.
B3: Đọc D3 từ bộ nhớ phụ (Lấy lịch sử tin nhắn giữa khách hàng và chủ sân).
B4: Nếu tin nhắn trống hoặc tệp đính kèm > 5Mb/không đúng định dạng, thông báo lỗi và quay lại B1.
B5: Nếu không hợp lệ quay lại B1
B6: Lưu tin nhắn vào D4 (Lưu trữ tin nhắn mới cùng với lịch sử chat).
B7: Xuất D5 ra thiết bị xuất
B8: Trả D6 cho người dùng
B9: Đóng kết nối cơ sở dữ liệu.
B10: Kết thúc.

5. Đăng ký và quản lý tài khoản
Mô tả các luồng dữ liệu:
D1: Email, mật khẩu, xác nhận mật khẩu, Họ và tên, Số điện thoại, Địa chỉ, Ảnh đại diện, Vai trò
D2: Không có
D3: Danh sách tỉnh (thành), quận (huyện), phường (xã); Danh sách Email đã sử dụng, Danh sách số điện thoại đã sử dụng
D4: D1
D5: D4
D6: Không có

Thuật toán:
B1: Nhận D1 từ người dùng
B2: Kết nối cơ sở dữ liệu
B3: Đọc D3 từ bộ nhớ phụ
B4: Kiểm tra (D1) hợp lệ với QD5
B5: Nếu không thỏa mãn các điều kiện trên thì đến B8
B6: Lưu D4 xuống bộ nhớ phụ
B7: Xuất D5 ra máy in
B8: Đóng kết nối cơ sở dữ liệu
B9: Kết thúc

6. Tìm kiếm và lọc sân
Mô tả các luồng dữ liệu:
D1: Địa điểm, Loại sân, Giá từ, Giá đến, Tiện ích, Đánh giá từ, Sắp xếp theo
D2: Không có
D3: Danh sách sân
D4: Không có
D5: Danh sách sân thỏa mãn
D6: D5

Thuật toán:
B1: Nhận D1 từ người dùng
B2: Kết nối cơ sở dữ liệu
B3: Đọc D3 từ bộ nhớ phụ
B4: Kiểm tra (D1) có hợp lệ với QD6
B5: Nếu không thỏa mãn các điều kiện trên thì đến B8
B6: Trả lại D6 cho người dùng
B7: Xuất D5 ra máy in
B8: Đóng kết nối cơ sở dữ liệu
B9: Kết thúc

7. Đặt sân và thanh toán
Mô tả các luồng dữ liệu:
D1: Sân, Ngày, Khung giờ, Thời lượng, Phương thức thanh toán, Thông tin thanh toán
D2: Không có
D3: Danh sách sân trống, Phương thức thanh toán khả dụng
D4: D1
D5: D4
D6: Không có

Thuật toán:
B1: Nhận D1 từ người dùng
B2: Kết nối cơ sở dữ liệu
B3: Đọc D3 từ bộ nhớ phụ
B4: Kiểm tra (D1) có hợp lệ với QD7.
B5: Nếu không thỏa mãn các điều kiện trên thì đến B8
B6: Lưu D4 xuống bộ nhớ phụ
B7: Xuất D5 ra máy in
B8: Đóng kết nối cơ sở dữ liệu
B9: Kết thúc

8. Đánh giá và nhận xét
Mô tả các luồng dữ liệu:
D1: Sân, Điểm đánh giá, Nhận xét, Hình ảnh
D2: Không có
D3: Các đánh giá đã có trước
D4: D1
D5: D4
D6: D3

Thuật toán:
B1: Nhận D1 từ người dùng
B2: Kết nối cơ sở dữ liệu
B3: Đọc D3 từ bộ nhớ phụ
B4: Kiểm tra (D1) có hợp lệ với QD8
B5: Nếu không thỏa mãn các điều kiện trên thì đến B8
B6: Lưu D4 xuống bộ nhớ phụ
B7: Xuất D5 ra máy in
B8: Đóng kết nối cơ sở dữ liệu
B9: Kết thúc

9. Quản lý lịch sử đặt sân
Mô tả các luồng dữ liệu:
D1: Danh sách sân đã đặt, Nội dung hành động (xem chi tiết/ thay đổi/ hủy)
D2: Không có
D3: Thông tin sân đã đặt
D4: D1
D5: D4
D6: D3

Thuật toán:
B1: Nhận D1 từ người dùng
B2: Kết nối cơ sở dữ liệu
B3: Đọc D3 từ bộ nhớ phụ
B4: Kiểm tra (D1) có hợp lệ với QD9
B5: Nếu không thỏa mãn các điều kiện trên thì đến B8
B6: Lưu D4 xuống bộ nhớ phụ
B7: Xuất D5 ra máy in
B8: Đóng kết nối cơ sở dữ liệu
B9: Kết thúc

10. Trợ giúp khách hàng
Mô tả các luồng dữ liệu:
D1: Chủ đề, Mô tả, File đính kèm, Thông tin liên hệ
D2: Không có
D3: Các câu hỏi thường gặp
D4: D1
D5: D4
D6: D3

Thuật toán:
B1: Nhận D1 từ người dùng
B2: Kết nối cơ sở dữ liệu
B3: Đọc D3 từ bộ nhớ phụ
B4: Kiểm tra (D1) có hợp lệ với QD10.
B5: Nếu không thỏa mãn các điều kiện trên thì đến B8
B6: Lưu D4 xuống bộ nhớ phụ
B7: Xuất D5 ra máy in
B8: Đóng kết nối cơ sở dữ liệu
B9: Kết thúc

IV. KIẾN TRÚC HỆ THỐNG (KIẾN TRÚC 3 LỚP)

1. Xác định các thành phần
a. Presentation Layer (Lớp giao diện người dùng)
Trình duyệt web (Client): Người dùng (chủ sân và người thuê) truy cập qua trình duyệt hoặc ứng dụng di động.
Giao diện: Được xây dựng bằng HTML/CSS/JavaScript (ReactJS hoặc Flutter cho ứng dụng di động).
Tương tác với người dùng:
Người thuê: Tìm kiếm sân, đặt sân, thanh toán, đánh giá sân, xem lịch sử đặt sân, yêu cầu hỗ trợ.
Chủ sân: Quản lý sân, quản lý lịch đặt sân, xem doanh thu, hỗ trợ khách hàng.
Giao tiếp với Business Layer: Sử dụng HTTP/HTTPS thông qua các API call (RESTful API).

b. Business Layer (Lớp xử lý nghiệp vụ)
Web server: Sử dụng NodeJS/Express, Django, hoặc Spring Boot.
Xử lý các nghiệp vụ:
Xác thực người dùng (đăng nhập, đăng ký, phân quyền chủ sân/người thuê).
Quản lý sân: Tạo, chỉnh sửa, xóa sân.
Quản lý lịch đặt sân: Kiểm tra lịch trống, cập nhật lịch, tránh trùng lịch.
Xử lý đặt sân: Xác nhận đặt sân, gửi thông báo.
Thanh toán: Tích hợp cổng thanh toán (Momo, ZaloPay), xử lý hoàn tiền.
Đánh giá: Lưu trữ và hiển thị đánh giá từ người thuê.
Hỗ trợ khách hàng: Chat trực tuyến, gửi email/SMS.
Quản lý doanh thu: Tạo báo cáo doanh thu, thống kê lượt đặt sân.
Giao tiếp với Data Layer: Sử dụng các thư viện truy vấn (ORM như Sequelize, Hibernate, hoặc SQL trực tiếp).

c. Data Layer (Lớp dữ liệu)
Hệ quản trị CSDL: PostgreSQL hoặc MySQL.
Lưu trữ:
Thông tin người dùng (chủ sân, người thuê): email, mật khẩu, tên, số điện thoại, vai trò.
Thông tin sân: tên, địa điểm, loại sân, giá thuê, tiện ích, hình ảnh.
Lịch đặt sân: thời gian, trạng thái (trống/đã đặt), sân liên quan.
Giao dịch thanh toán: số tiền, phương thức thanh toán, trạng thái.
Đánh giá: số sao, nhận xét, sân liên quan.
Lịch sử hỗ trợ: yêu cầu hỗ trợ, phản hồi, trạng thái.

2. Bố trí các thành phần
[Note: The original document does not provide specific details on the arrangement of components, so this section is assumed to describe the standard 3-tier architecture deployment where the Presentation Layer runs on client devices, the Business Layer on a web server, and the Data Layer on a database server.]

3. Thiết lập mối quan hệ giữa các thành phần
[Note: The original document does not elaborate on this, but it is inferred that the Presentation Layer communicates with the Business Layer via RESTful APIs over HTTP/HTTPS, and the Business Layer interacts with the Data Layer using database queries.]

V. THIẾT KẾ ĐỐI TƯỢNG

1. Tương tác và đối tượng
Dựa trên các yêu cầu của hệ thống đặt sân trực tuyến, xác định các đối tượng và tương tác chính:
[Note: The document does not list specific objects, but based on context, key objects include User, Field, Booking, Payment, Review, Notification, SupportRequest, Chat.]

2. Luồng tương tác
Đăng nhập
User → HomePage: openApp()
User → LoginForm: login()
LoginForm → LoginForm: showLoginForm()
User → LoginForm: submitLogin(email, password)
LoginForm → AuthService: verifyCredential(email, password)
AuthService → User: fetchUser(email)
AuthService → LoginForm: notify(success)

VI. THIẾT KẾ DIAGRAM

1. Class diagram
[Note: The original document does not provide a detailed class diagram, but based on the requirements, it would include classes like User, Field, Booking, Payment, Review, Notification, SupportRequest, Chat, with appropriate attributes and relationships.]

2. Object diagram
Kịch bản:
Một người thuê (Renter) tên "Minh" đặt một sân bóng đá (Field) do chủ sân (FieldOwner) tên "Quy" sở hữu.
Minh thực hiện một đặt sân (Booking), thanh toán (Payment), và gửi đánh giá (Review) cho sân.
Một thông báo (Notification) được gửi đến Minh để xác nhận đặt sân.
Minh gửi một yêu cầu hỗ trợ (SupportRequest) và bắt đầu một phiên trò chuyện (Chat) với Quy.

3. Activity diagram
Tìm kiếm sân
User → SearchFieldForm: searchField()
SearchFieldForm → SearchFieldForm: showSearchForm()
User → SearchFieldForm: submitSearch(criteria)
SearchFieldForm → Field: fetchFields(criteria)
Field → SearchFieldForm: returnFields()

Đặt sân và thanh toán
User → BookingForm: bookField()
BookingForm → BookingForm: showBookingForm()
User → BookingForm: submitBooking(fieldId, time)
BookingForm → ScheduleService: checkSchedule(fieldId, time)
ScheduleService → Booking: saveBooking(data)
Booking → PaymentService: processPayment()
PaymentService → Payment: savePayment(data)
Booking → NotificationService: notifyUser()

Đánh giá sân
User → ReviewForm: reviewField()
ReviewForm → ReviewForm: showReviewForm()
User → ReviewForm: submitReview(rating, comment)
ReviewForm → Review: saveReview(data)
Review → NotificationService: notifyUser()

Tạo sân
FieldOwner → CreateFieldForm: createField()
CreateFieldForm → CreateFieldForm: showForm()
FieldOwner → CreateFieldForm: submitField(data, image)
CreateFieldForm → ImageService: uploadImage(image)
CreateFieldForm → Field: saveField(data, imageUrl)

Chỉnh sửa sân
FieldOwner → UpdateFieldForm: updateField()
UpdateFieldForm → UpdateFieldForm: showForm()
FieldOwner → UpdateFieldForm: submitUpdateField(data)
UpdateFieldForm → Field: updateField(data)

Quản lý lịch đặt sân
FieldOwner → ScheduleManagement: manageSchedule()
ScheduleManagement → ScheduleService: fetchSchedule()
FieldOwner → ScheduleManagement: updateSchedule(data)
ScheduleManagement → ScheduleService: updateSchedule(data)

Quản lý doanh thu
FieldOwner → RevenueDashboard: viewRevenue()
RevenueDashboard → RevenueService: fetchRevenue()
RevenueService → RevenueDashboard: returnRevenue()

Hỗ trợ khách hàng
User → SupportForm: supportRequest()
SupportForm → SupportForm: showSupportForm()
User → SupportForm: submitSupport(data)
SupportForm → SupportService: handleSupport(data)
SupportService → NotificationService: notifyUser()

Sơ đồ hoạt động (Activity Diagram)
- Đăng ký / Đăng nhập Người dùng
- Tìm kiếm và Xem Sân
- Đặt Sân và Thanh toán
- Đánh giá Sân
- Quản lý Lịch sử Đặt sân (Người thuê)
- Yêu cầu Hỗ trợ (Người thuê)
- Quản lý Thông tin Sân (Chủ sân)
- Quản lý Lịch/Đặt sân (Chủ sân)
- Xem Doanh thu (Chủ sân)
- Xử lý Yêu cầu Hỗ trợ (Chủ sân)

Mô hình Use case
4. Sơ đồ Use case
[Note: The original document references a use case diagram but does not provide it. It includes actors (Renter, FieldOwner, Admin) and use cases as detailed below.]

5. Danh sách các Actor
- Người thuê (Renter)
- Chủ sân (FieldOwner)
- Quản trị viên (Admin)

6. Danh sách các Use case
- Đăng nhập
- Tìm kiếm sân
- Đặt sân
- Đăng ký tài khoản
- Quản lý tài khoản
- Đăng xuất
- Xem chi tiết sân
- Thanh toán đặt sân
- Đánh giá sân
- Xem lịch sử đặt sân
- Hủy đặt sân
- Yêu cầu hỗ trợ
- Quản lý thông tin sân
- Quản lý lịch sân
- Xem báo cáo doanh thu
- Phản hồi hỗ trợ
- Quản lý tài khoản người dùng
- Quản lý sân (Admin)
- Xem báo cáo hệ thống

7. Đặc tả Use case

4.1. Đặc tả Use-case “Đăng nhập”
4.1.1 Tóm tắt:
Cho phép Người thuê, Chủ sân hoặc Admin đã có tài khoản truy cập vào các chức năng của hệ thống tương ứng với quyền hạn của họ.

4.1.2 Dòng sự kiện:
4.1.2.1 Dòng sự kiện chính:
Người dùng chọn chức năng "Đăng nhập" hoặc truy cập trang yêu cầu đăng nhập.
Hệ thống hiển thị giao diện Đăng nhập yêu cầu Email/Số điện thoại và Mật khẩu.
Người dùng nhập Email/Số điện thoại và Mật khẩu.
Người dùng nhấn nút "Đăng nhập".
Hệ thống kiểm tra thông tin đăng nhập trong Cơ sở dữ liệu.
Hệ thống xác thực thông tin thành công, kiểm tra trạng thái tài khoản (active).
Hệ thống chuyển hướng người dùng đến giao diện chính tương ứng với vai trò (Người thuê, Chủ sân, Admin).

4.1.2.2 Các dòng sự kiện khác:
Sai thông tin đăng nhập:
Tại bước 6, nếu thông tin Email/Số điện thoại hoặc Mật khẩu không chính xác, hệ thống hiển thị thông báo lỗi "Sai thông tin đăng nhập!". Người dùng quay lại bước 3.
Để trống thông tin:
Tại bước 4, nếu Người dùng không nhập Email/Số điện thoại hoặc Mật khẩu, hệ thống hiển thị thông báo yêu cầu nhập đủ thông tin. Người dùng quay lại bước 3.
Tài khoản bị khóa/vô hiệu hóa:
Tại bước 6, nếu tài khoản bị khóa (unactive), hệ thống hiển thị thông báo "Tài khoản của bạn đã bị khóa. Vui lòng liên hệ quản trị viên." và không cho phép đăng nhập.

4.1.3 Các yêu cầu đặc biệt:
Mật khẩu nên được che đi khi nhập.
Có thể có tùy chọn "Ghi nhớ đăng nhập" (sử dụng cookie/session).
Có thể có liên kết "Quên mật khẩu?".
Hệ thống nên có cơ chế chống brute-force (ví dụ: khóa tài khoản sau N lần nhập sai).

4.1.4 Trạng thái hệ thống khi bắt đầu thực hiện Use-case:
Người dùng chưa đăng nhập vào hệ thống.
Hệ thống đang hiển thị giao diện có chức năng đăng nhập.

4.1.5 Trạng thái hệ thống sau khi thực hiện Use-case:
Thực hiện thành công: Người dùng đã đăng nhập thành công và đang ở giao diện chính theo vai trò. Một phiên làm việc (session) được tạo.
Thực hiện thất bại: Người dùng vẫn ở giao diện đăng nhập, chưa đăng nhập vào hệ thống.

4.1.6 Điểm mở rộng:
Đăng nhập bằng tài khoản mạng xã hội (Google, Facebook).
Xác thực hai yếu tố (2FA).

4.2. Đặc tả Use-case “Tìm kiếm sân”
4.2.1 Tóm tắt:
Cho phép Người thuê tìm kiếm các sân thể thao có sẵn trên hệ thống dựa trên các tiêu chí mong muốn.

4.2.2 Dòng sự kiện:
4.2.2.1 Dòng sự kiện chính:
Người thuê truy cập chức năng/trang "Tìm kiếm sân".
Hệ thống hiển thị giao diện tìm kiếm với các bộ lọc (ví dụ: Địa điểm (Tỉnh/Thành, Quận/Huyện), Loại sân, Ngày/Giờ mong muốn, Khoảng giá, Tiện ích...).
Người thuê nhập/chọn các tiêu chí tìm kiếm mong muốn.
Người thuê nhấn nút "Tìm kiếm".
Hệ thống truy vấn cơ sở dữ liệu dựa trên các tiêu chí tìm kiếm.
Hệ thống hiển thị danh sách các sân phù hợp, kèm thông tin tóm tắt (tên sân, địa chỉ, giá tham khảo, ảnh đại diện, đánh giá trung bình).
Người thuê có thể xem các trang kết quả khác nhau (nếu có nhiều kết quả).

4.2.2.2 Các dòng sự kiện khác:
Không tìm thấy kết quả:
Tại bước 6, nếu không có sân nào phù hợp với tiêu chí, hệ thống hiển thị thông báo "Không tìm thấy sân phù hợp. Vui lòng thử lại với tiêu chí khác."
Bỏ trống tiêu chí:
Tại bước 3, nếu Người thuê không nhập/chọn tiêu chí nào và nhấn "Tìm kiếm", hệ thống có thể hiển thị tất cả các sân hoặc yêu cầu nhập ít nhất một tiêu chí chính (ví dụ: địa điểm).
Sắp xếp/Lọc kết quả:
Sau bước 6, Người thuê có thể chọn sắp xếp kết quả (theo giá, đánh giá, khoảng cách...) hoặc lọc thêm trên kết quả hiện có. Hệ thống cập nhật lại danh sách hiển thị.

4.2.3 Các yêu cầu đặc biệt:
Giao diện tìm kiếm cần trực quan, dễ sử dụng.
Kết quả tìm kiếm nên tải nhanh.
Có thể tích hợp bản đồ để hiển thị vị trí các sân.
Thông tin giá và lịch trống hiển thị trong kết quả nên mang tính tham khảo nhanh.

4.2.4 Trạng thái hệ thống khi bắt đầu thực hiện Use-case:
Người thuê đang ở giao diện có chức năng tìm kiếm sân (có thể đã đăng nhập hoặc chưa).

4.2.5 Trạng thái hệ thống sau khi thực hiện Use-case:
Hệ thống hiển thị danh sách các sân phù hợp với tiêu chí tìm kiếm của Người thuê hoặc thông báo không tìm thấy.

4.2.6 Điểm mở rộng:
Gợi ý tìm kiếm dựa trên vị trí hiện tại của người dùng.
Lưu lại các tìm kiếm gần đây.

4.3. Đặc tả Use-case “Đặt sân”
4.3.1 Tóm tắt:
Cho phép Người thuê đã đăng nhập chọn khung giờ cụ thể tại một sân đã chọn và tiến hành các bước để đặt sân đó, bao gồm cả việc thanh toán.

4.3.2 Dòng sự kiện:
4.3.2.1 Dòng sự kiện chính:
Người thuê đang xem chi tiết một sân cụ thể (Precondition: Đã đăng nhập, đã chọn sân).
Hệ thống hiển thị lịch trống của sân theo ngày/tuần.
Người thuê chọn(các) khung giờ mong muốn còn trống trên lịch.
Hệ thống tính toán và hiển thị tổng chi phí cho các khung giờ đã chọn.
Người thuê nhấn nút "Đặt ngay" hoặc "Tiến hành thanh toán".
Hệ thống yêu cầu xác nhận lại thông tin đặt sân (sân, ngày giờ, tổng tiền).
Người thuê xác nhận thông tin.
Hệ thống tạm thời giữ chỗ khung giờ đó (để tránh người khác đặt trùng).
(<<include>> Thanh toán đặt sân) Hệ thống chuyển sang giao diện/quy trình thanh toán (Xem Đặc tả Use Case "Thanh toán đặt sân").
Sau khi thanh toán thành công, hệ thống xác nhận đặt sân thành công.
Hệ thống lưu thông tin đặt sân vào lịch sử của Người thuê và cập nhật lịch của Chủ sân.
Hệ thống gửi thông báo xác nhận đặt sân (qua email/SMS/thông báo trong ứng dụng) cho Người thuê và thông báo có đặt sân mới cho Chủ sân.

4.3.2.2 Các dòng sự kiện khác:
Khung giờ vừa chọn đã bị đặt:
Tại bước 3 hoặc bước 8, nếu khung giờ Người thuê chọn vừa bị người khác đặt xong, hệ thống hiển thị thông báo lỗi "Khung giờ bạn chọn vừa hết. Vui lòng chọn khung giờ khác." Người thuê quay lại bước 3.
Người thuê hủy bỏ:
Người thuê có thể hủy bỏ quá trình đặt sân ở bất kỳ bước nào trước khi hoàn tất thanh toán. Hệ thống hủy việc giữ chỗ tạm thời (nếu có) và quay lại trang chi tiết sân hoặc trang trước đó.
Thanh toán thất bại:
Xem dòng sự kiện khác trong Đặc tả Use Case "Thanh toán đặt sân". Hệ thống hủy việc giữ chỗ tạm thời.
Chưa đăng nhập:
Nếu Người thuê chưa đăng nhập mà cố gắng thực hiện bước 5, hệ thống yêu cầu Đăng nhập/Đăng ký trước.

4.3.3 Các yêu cầu đặc biệt:
Lịch trống phải được cập nhật gần như thời gian thực.
Thời gian giữ chỗ tạm thời (bước 8) nên có giới hạn (ví dụ: 10-15 phút) để giải phóng nếu người dùng không hoàn tất thanh toán.
Cần hiển thị rõ ràng chính sách hủy sân (nếu có) trước khi người dùng xác nhận đặt.

4.3.4 Trạng thái hệ thống khi bắt đầu thực hiện Use-case:
Người thuê đã đăng nhập.
Người thuê đang xem trang chi tiết của một sân cụ thể.

4.3.5 Trạng thái hệ thống sau khi thực hiện Use-case:
Thực hiện thành công: Đặt sân được ghi nhận trong hệ thống, lịch sân được cập nhật, thông báo được gửi đi.
Thực hiện thất bại: Không có đặt sân nào được ghi nhận, trạng thái lịch sân không đổi (hoặc chỗ tạm giữ được hủy). Người dùng có thể ở lại trang đặt sân hoặc trang thanh toán.

4.3.6 Điểm mở rộng:
Đặt sân định kỳ (hàng tuần, hàng tháng).
Thêm ghi chú cho Chủ sân khi đặt.
Áp dụng mã giảm giá/voucher.

4.4. Đặc tả Use-case “Đăng ký tài khoản”
4.4.1 Tóm tắt:
Cho phép người dùng mới (chủ yếu là Người thuê) tạo một tài khoản để sử dụng các chức năng của hệ thống.

4.4.2 Dòng sự kiện:
4.4.2.1 Dòng sự kiện chính:
Người dùng chọn chức năng "Đăng ký".
Hệ thống hiển thị form đăng ký yêu cầu các thông tin bắt buộc (Họ tên, Email, Số điện thoại, Mật khẩu, Xác nhận mật khẩu) và có thể có thông tin tùy chọn.
Người dùng nhập đầy đủ thông tin vào form.
Người dùng nhấn nút "Đăng ký".
Hệ thống kiểm tra tính hợp lệ của thông tin (Email/SĐT đã tồn tại chưa, mật khẩu có khớp không, định dạng có đúng không).
Nếu thông tin hợp lệ, hệ thống lưu thông tin tài khoản mới vào cơ sở dữ liệu với trạng thái "active".
Hệ thống hiển thị thông báo "Đăng ký thành công!".
(Tùy chọn) Hệ thống tự động đăng nhập người dùng vào tài khoản vừa tạo hoặc chuyển hướng đến trang đăng nhập.

4.4.2.2 Các dòng sự kiện khác:
Email/SĐT đã tồn tại:
Tại bước 5, nếu Email hoặc Số điện thoại đã được sử dụng bởi tài khoản khác, hệ thống báo lỗi "Email/Số điện thoại đã tồn tại. Vui lòng sử dụng thông tin khác." Người dùng quay lại bước 3.
Mật khẩu không khớp:
Tại bước 5, nếu Mật khẩu và Xác nhận mật khẩu không giống nhau, hệ thống báo lỗi "Mật khẩu xác nhận không khớp." Người dùng quay lại bước 3.
Thông tin không hợp lệ:
Tại bước 5, nếu các thông tin khác không hợp lệ (ví dụ: sai định dạng email, mật khẩu quá yếu), hệ thống báo lỗi cụ thể. Người dùng quay lại bước 3.
Bỏ trống thông tin bắt buộc:
Tại bước 4, nếu người dùng chưa điền đủ thông tin bắt buộc, hệ thống báo lỗi yêu cầu điền đủ thông tin.

4.4.3 Các yêu cầu đặc biệt:
Yêu cầu về độ mạnh mật khẩu (độ dài tối thiểu, ký tự đặc biệt...).
Cần có cơ chế xác thực Email/Số điện thoại (gửi mã OTP hoặc link xác nhận) để đảm bảo tính chính xác (có thể là bước sau đăng ký).
Cần có liên kết đến trang Điều khoản dịch vụ và Chính sách bảo mật mà người dùng phải đồng ý.

4.4.4 Trạng thái hệ thống khi bắt đầu thực hiện Use-case:
Người dùng chưa có tài khoản hoặc chưa đăng nhập.
Hệ thống đang hiển thị giao diện có chức năng đăng ký.

4.4.5 Trạng thái hệ thống sau khi thực hiện Use-case:
Thực hiện thành công: Một tài khoản mới được tạo và lưu trong hệ thống. Người dùng có thể đã được đăng nhập hoặc đang ở trang đăng nhập.
Thực hiện thất bại: Không có tài khoản nào được tạo. Người dùng vẫn ở trang đăng ký và thấy thông báo lỗi.

4.4.6 Điểm mở rộng:
Đăng ký bằng tài khoản mạng xã hội.
Cho phép Chủ sân đăng ký (có thể cần quy trình duyệt riêng).

4.5. Đặc tả Use-case “Quản lý tài khoản”
4.5.1 Tóm tắt:
Cho phép Người thuê hoặc Chủ sân đã đăng nhập xem và cập nhật thông tin cá nhân (Họ tên, SĐT, ảnh đại diện...) và thay đổi mật khẩu.

4.5.2 Dòng sự kiện:
4.5.2.1 Dòng sự kiện chính (Cập nhật thông tin):
Người dùng truy cập trang "Thông tin tài khoản" hoặc "Profile".
Hệ thống hiển thị thông tin tài khoản hiện tại của người dùng.
Người dùng nhấn nút "Chỉnh sửa" hoặc tương tự.
Hệ thống cho phép chỉnh sửa các trường thông tin (trừ email/username có thể không đổi được).
Người dùng thay đổi thông tin mong muốn.
Người dùng nhấn nút "Lưu thay đổi".
Hệ thống kiểm tra tính hợp lệ của thông tin mới (nếu cần).
Hệ thống cập nhật thông tin tài khoản trong cơ sở dữ liệu.
Hệ thống hiển thị thông báo "Cập nhật thông tin thành công!".

4.5.2.2 Dòng sự kiện chính (Đổi mật khẩu):
Người dùng chọn chức năng "Đổi mật khẩu" trong trang quản lý tài khoản.
Hệ thống hiển thị form yêu cầu nhập Mật khẩu cũ, Mật khẩu mới, Xác nhận mật khẩu mới.
Người dùng nhập đầy đủ thông tin.
Người dùng nhấn nút "Xác nhận" hoặc "Đổi mật khẩu".
Hệ thống kiểm tra Mật khẩu cũ có khớp với tài khoản không.
Hệ thống kiểm tra Mật khẩu mới và Xác nhận mật khẩu mới có khớp không, có đáp ứng yêu cầu độ mạnh không, có trùng mật khẩu cũ không.
Nếu tất cả hợp lệ, hệ thống cập nhật mật khẩu mới cho tài khoản.
Hệ thống hiển thị thông báo "Đổi mật khẩu thành công!". (Có thể yêu cầu đăng nhập lại).

4.5.2.3 Các dòng sự kiện khác:
Nhập sai mật khẩu cũ: Báo lỗi, quay lại bước 3 (Đổi MK).
Mật khẩu mới không khớp/không đủ mạnh/trùng MK cũ: Báo lỗi cụ thể, quay lại bước 3 (Đổi MK).
Thông tin cập nhật không hợp lệ: Báo lỗi, quay lại bước 5 (Cập nhật TT).
Người dùng hủy bỏ: Thoát khỏi form chỉnh sửa/đổi mật khẩu mà không lưu.

4.5.3 Các yêu cầu đặc biệt:
Các yêu cầu về độ mạnh mật khẩu mới.
Việc thay đổi Email/SĐT có thể cần xác thực lại.

4.5.4 Trạng thái hệ thống khi bắt đầu thực hiện Use-case:
Người dùng (Người thuê hoặc Chủ sân) đã đăng nhập thành công.

4.5.5 Trạng thái hệ thống sau khi thực hiện Use-case:
Thông tin tài khoản hoặc mật khẩu của người dùng đã được cập nhật trong hệ thống (nếu thành công).

4.5.6 Điểm mở rộng:
Quản lý các thiết bị đã đăng nhập.
Cài đặt thông báo.
Liên kết/Hủy liên kết tài khoản mạng xã hội.

4.6. Đặc tả Use-case “Đăng xuất”
4.6.1 Tóm tắt:
Cho phép người dùng đã đăng nhập kết thúc phiên làm việc an toàn.

4.6.2 Dòng sự kiện:
4.6.2.1 Dòng sự kiện chính:
Người dùng nhấn vào nút/liên kết "Đăng xuất".
Hệ thống hủy bỏ phiên làm việc (session/token) hiện tại của người dùng.
Hệ thống chuyển hướng người dùng về trang chủ hoặc trang đăng nhập.

4.6.3 Các yêu cầu đặc biệt:
Không có.

4.6.4 Trạng thái hệ thống khi bắt đầu thực hiện Use-case:
Người dùng đã đăng nhập vào hệ thống.

4.6.5 Trạng thái hệ thống sau khi thực hiện Use-case:
Người dùng đã đăng xuất, phiên làm việc bị hủy.

4.6.6 Điểm mở rộng:
Hỏi xác nhận trước khi đăng xuất.

4.7. Đặc tả Use-case “Xem chi tiết sân”
4.7.1 Tóm tắt:
Cho phép Người thuê xem thông tin chi tiết, đầy đủ về một sân thể thao cụ thể đã được chọn từ kết quả tìm kiếm hoặc từ nguồn khác.

4.7.2 Dòng sự kiện:
4.7.2.1 Dòng sự kiện chính:
Người thuê chọn một sân cụ thể (ví dụ: từ danh sách kết quả tìm kiếm).
Hệ thống truy xuất và hiển thị thông tin chi tiết của sân đó, bao gồm:
Tên sân, địa chỉ đầy đủ.
Hình ảnh (có thể có gallery nhiều ảnh).
Mô tả chi tiết về sân.
Loại sân, kích thước (nếu có).
Danh sách các tiện ích (nhà vệ sinh, nước uống, đèn, chỗ đỗ xe...).
Giá thuê theo khung giờ/ngày.
Lịch trống/bận của sân (hiển thị dạng lịch).
Đánh giá trung bình (dạng sao) và các nhận xét chi tiết từ người dùng khác.
Thông tin liên hệ của chủ sân (có thể ẩn/hiện tùy cài đặt).
Bản đồ vị trí (tùy chọn).
Chính sách hủy sân (nếu có).
Người thuê có thể xem lịch theo ngày/tuần khác nhau.
Người thuê có thể đọc các đánh giá/nhận xét.

4.7.3 Các yêu cầu đặc biệt:
Thông tin phải đầy đủ, chính xác và được trình bày rõ ràng.
Lịch trống phải dễ nhìn và dễ tương tác để chọn giờ.
Hình ảnh chất lượng tốt.

4.7.4 Trạng thái hệ thống khi bắt đầu thực hiện Use-case:
Người thuê đang duyệt hệ thống (có thể đã đăng nhập hoặc chưa).

4.7.5 Trạng thái hệ thống sau khi thực hiện Use-case:
Người dùng đã xem được thông tin chi tiết của sân.

4.7.6 Điểm mở rộng:
So sánh với các sân tương tự.
Lưu sân vào danh sách yêu thích.
Chia sẻ thông tin sân.

4.8. Đặc tả Use-case “Thanh toán đặt sân”
4.8.1 Tóm tắt:
Xử lý quá trình thanh toán cho một lượt đặt sân sau khi Người thuê đã xác nhận thông tin đặt. Tương tác với Hệ thống thanh toán bên ngoài.

4.8.2 Dòng sự kiện:
4.8.2.1 Dòng sự kiện chính:
Hệ thống chuyển hướng người dùng đến giao diện thanh toán sau khi xác nhận đặt sân (Precondition: Đã chọn sân, giờ và xác nhận thông tin).
Hệ thống hiển thị lại thông tin đặt sân và tổng số tiền cần thanh toán.
Hệ thống hiển thị các phương thức thanh toán được chấp nhận (Ví điện tử, Thẻ ngân hàng...).
Người thuê chọn một phương thức thanh toán.
Hệ thống chuyển hướng hoặc hiển thị form/popup của Hệ thống thanh toán tương ứng (ví dụ: Quét mã QR Momo, nhập thông tin thẻ...).
Người thuê thực hiện các bước thanh toán theo yêu cầu của Hệ thống thanh toán.
Hệ thống thanh toán xử lý giao dịch.
Hệ thống thanh toán trả kết quả (thành công/thất bại) về cho Hệ thống đặt sân.
Hệ thống đặt sân nhận kết quả. Nếu thành công, thực hiện các bước tiếp theo của Use Case "Đặt sân" (lưu CSDL, gửi thông báo...). Nếu thất bại, thông báo lỗi cho Người thuê.

4.8.2.2 Các dòng sự kiện khác:
Người thuê hủy thanh toán: Người thuê đóng cửa sổ/popup thanh toán hoặc chọn hủy trên giao diện của Hệ thống thanh toán. Hệ thống đặt sân nhận tín hiệu hủy và quay lại bước chọn phương thức hoặc hủy luôn đơn đặt.
Giao dịch bị lỗi/Timeout: Hệ thống thanh toán báo lỗi kỹ thuật hoặc quá thời gian xử lý. Hệ thống đặt sân thông báo lỗi cho Người thuê.

4.8.3 Các yêu cầu đặc biệt:
Kết nối với Hệ thống thanh toán phải an toàn (HTTPS, API key/secret...).
Xử lý chính xác các mã lỗi trả về từ Hệ thống thanh toán.
Đảm bảo không ghi nhận đặt sân nếu thanh toán không thành công.
Giao diện thanh toán cần rõ ràng, tin cậy.

4.8.4 Trạng thái hệ thống khi bắt đầu thực hiện Use-case:
Người thuê đã xác nhận thông tin đặt sân và sẵn sàng thanh toán.
Hệ thống đã tạm giữ chỗ (nếu có).

4.8.5 Trạng thái hệ thống sau khi thực hiện Use-case:
Thực hiện thành công: Giao dịch thanh toán hoàn tất, kết quả được trả về cho Use Case "Đặt sân".
Thực hiện thất bại: Giao dịch không thành công, kết quả được trả về cho Use Case "Đặt sân".

4.8.6 Điểm mở rộng:
Lưu thông tin thanh toán (an toàn) cho lần sau.
Thanh toán một phần/đặt cọc.

4.9. Đặc tả Use-case “Đánh giá sân”
4.9.1 Tóm tắt:
Cho phép Người thuê đưa ra phản hồi về chất lượng sân và dịch vụ sau khi đã hoàn thành lượt đặt và sử dụng sân.

4.9.2 Dòng sự kiện:
4.9.2.1 Dòng sự kiện chính:
Người thuê truy cập vào lịch sử đặt sân hoặc nhận được thông báo mời đánh giá.
Người thuê chọn lượt đặt sân đã hoàn thành muốn đánh giá.
Hệ thống hiển thị form đánh giá yêu cầu chọn số sao (1-5 sao) và nhập nội dung nhận xét.
Người thuê chọn số sao và nhập nhận xét.
(Tùy chọn) Người thuê có thể tải lên hình ảnh kèm theo đánh giá.
Người dùng nhấn nút "Gửi đánh giá".
Hệ thống lưu trữ đánh giá vào cơ sở dữ liệu, liên kết với sân và người dùng.
Hệ thống hiển thị thông báo "Gửi đánh giá thành công!".

4.9.2.2 Các dòng sự kiện khác:
Chưa chọn sao hoặc nhập nhận xét: Hệ thống có thể yêu cầu bắt buộc cả hai hoặc một trong hai. Báo lỗi nếu thiếu.
Đánh giá chứa từ ngữ không phù hợp: Hệ thống có thể có bộ lọc từ ngữ hoặc cơ chế báo cáo/kiểm duyệt đánh giá.

4.9.3 Các yêu cầu đặc biệt:
Chỉ cho phép đánh giá sau khi lượt đặt sân đã kết thúc.
Mỗi lượt đặt chỉ nên được đánh giá một lần.
Nên có quy định về nội dung đánh giá được phép.

4.9.4 Trạng thái hệ thống khi bắt đầu thực hiện Use-case:
Người thuê đã đăng nhập.
Người thuê đã hoàn thành ít nhất một lượt đặt sân.

4.9.5 Trạng thái hệ thống sau khi thực hiện Use-case:
Đánh giá của người dùng được lưu trữ và có thể hiển thị trên trang chi tiết sân.

4.9.6 Điểm mở rộng:
Chủ sân có thể phản hồi lại đánh giá.
Admin có thể quản lý/xóa các đánh giá không phù hợp.
Đánh giá chi tiết hơn theo từng tiêu chí (vệ sinh, mặt sân, ánh sáng...).

4.10. Đặc tả Use-case “Xem lịch sử đặt sân”
4.10.1 Tóm tắt:
Cho phép Người thuê xem lại danh sách các lượt đặt sân đã thực hiện (bao gồm cả đã hoàn thành, sắp tới và đã hủy).

4.10.2 Dòng sự kiện:
4.10.2.1 Dòng sự kiện chính:
Người thuê truy cập mục "Lịch sử đặt sân" hoặc tương tự.
Hệ thống truy vấn và hiển thị danh sách các lượt đặt sân của người dùng đó, sắp xếp theo thời gian (mới nhất trước).
Mỗi mục trong danh sách hiển thị thông tin tóm tắt: Tên sân, Ngày giờ đặt, Tổng tiền, Trạng thái (Đã hoàn thành, Sắp tới, Đã hủy, Đang chờ thanh toán...).
Người thuê có thể lọc lịch sử theo trạng thái hoặc khoảng thời gian.
Người thuê có thể chọn vào một lượt đặt cụ thể để xem chi tiết đầy đủ (thông tin sân, giờ, thanh toán, mã đặt sân...).
Từ chi tiết lượt đặt, người thuê có thể thực hiện các hành động khác (nếu được phép và hợp lệ) như Hủy đặt sân, Đánh giá sân, Xem hóa đơn... (Extend points).

4.10.3 Các yêu cầu đặc biệt:
Hiển thị trạng thái rõ ràng.
Phân trang nếu lịch sử quá dài.

4.10.4 Trạng thái hệ thống khi bắt đầu thực hiện Use-case:
Người thuê đã đăng nhập.

4.10.5 Trạng thái hệ thống sau khi thực hiện Use-case:
Người thuê đã xem được danh sách hoặc chi tiết các lượt đặt sân của mình.

4.10.6 Điểm mở rộng:
Xuất lịch sử ra file (PDF, Excel).
Đặt lại sân tương tự từ lịch sử.

4.11. Đặc tả Use-case “Hủy đặt sân”
4.11.1 Tóm tắt:
Cho phép Người thuê hủy một lượt đặt sân sắp tới, tuân theo chính sách hủy của sân đó.

4.11.2 Dòng sự kiện:
4.11.2.1 Dòng sự kiện chính:
Người thuê đang xem chi tiết một lượt đặt sân sắp tới trong Lịch sử đặt sân (Precondition: Đặt sân ở trạng thái "Sắp tới").
Người thuê nhấn nút "Hủy đặt sân".
Hệ thống kiểm tra chính sách hủy của sân (thời gian cho phép hủy, phí hủy nếu có).
Nếu không được phép hủy (ví dụ: quá sát giờ), hệ thống hiển thị thông báo "Không thể hủy đặt sân này theo chính sách." và kết thúc use case.
Nếu được phép hủy, hệ thống hiển thị thông tin về chính sách hủy (ví dụ: "Bạn sẽ được hoàn lại X% tiền" hoặc "Bạn sẽ bị trừ Y phí hủy").
Hệ thống yêu cầu người dùng xác nhận lại việc hủy.
Người dùng xác nhận muốn hủy.
Hệ thống cập nhật trạng thái đặt sân thành "Đã hủy" trong CSDL.
Hệ thống cập nhật lại lịch của Chủ sân (khung giờ trở thành trống).
Hệ thống xử lý hoàn tiền (nếu có) theo chính sách (có thể là quy trình riêng hoặc tự động).
Hệ thống gửi thông báo hủy thành công cho Người thuê và thông báo có lượt hủy cho Chủ sân.

4.11.2.2 Các dòng sự kiện khác:
Người thuê không xác nhận hủy: Tại bước 7, nếu người dùng chọn không hủy, use case kết thúc, trạng thái đặt sân không đổi.

4.11.3 Các yêu cầu đặc biệt:
Chính sách hủy phải được định nghĩa rõ ràng cho từng sân hoặc chung cho hệ thống.
Quy trình hoàn tiền (nếu có) cần được xử lý chính xác.

4.11.4 Trạng thái hệ thống khi bắt đầu thực hiện Use-case:
Người thuê đã đăng nhập.
Người thuê đang xem chi tiết một đặt sân hợp lệ để hủy.

4.11.5 Trạng thái hệ thống sau khi thực hiện Use-case:
Thực hiện thành công: Trạng thái đặt sân là "Đã hủy", lịch sân được cập nhật, thông báo được gửi.
Thực hiện thất bại: Trạng thái đặt sân không đổi.

4.11.6 Điểm mở rộng:
Yêu cầu lý do hủy.

4.12. Đặc tả Use-case “Yêu cầu hỗ trợ”
4.12.1 Tóm tắt:
Cho phép Người thuê gửi câu hỏi, báo cáo sự cố hoặc yêu cầu trợ giúp đến Chủ sân hoặc bộ phận quản trị hệ thống (Admin).

4.12.2 Dòng sự kiện:
4.12.2.1 Dòng sự kiện chính:
Người thuê truy cập mục "Hỗ trợ", "Liên hệ" hoặc tương tự.
Hệ thống hiển thị form yêu cầu hỗ trợ, có thể yêu cầu chọn chủ đề (ví dụ: Vấn đề đặt sân, Thanh toán, Góp ý, Báo cáo sự cố...).
Người thuê nhập tiêu đề và nội dung chi tiết của yêu cầu.
(Tùy chọn) Người thuê đính kèm tệp (ảnh chụp màn hình lỗi...).
Người dùng nhấn nút "Gửi yêu cầu".
Hệ thống lưu trữ yêu cầu hỗ trợ vào CSDL, gắn với người dùng và (nếu có thể xác định) với sân hoặc đặt sân liên quan.
Hệ thống gửi thông báo (nội bộ hoặc email) đến bộ phận/người chịu trách nhiệm xử lý (Chủ sân hoặc Admin).
Hệ thống hiển thị thông báo "Gửi yêu cầu thành công. Chúng tôi sẽ phản hồi sớm." cho Người thuê.

4.12.3 Các yêu cầu đặc biệt:
Phân loại yêu cầu để chuyển đúng người xử lý.
Giới hạn kích thước/loại tệp đính kèm.

4.12.4 Trạng thái hệ thống khi bắt đầu thực hiện Use-case:
Người thuê đang sử dụng hệ thống (nên đăng nhập để dễ theo dõi).

4.12.5 Trạng thái hệ thống sau khi thực hiện Use-case:
Yêu cầu hỗ trợ được lưu trữ và thông báo đã được gửi đến bộ phận xử lý.

4.12.6 Điểm mở rộng:
Hệ thống chat trực tuyến thay vì form.
Cơ chế theo dõi trạng thái yêu cầu hỗ trợ cho Người thuê.
Tích hợp cơ sở tri thức/FAQ để người dùng tự tìm câu trả lời.

4.13. Đặc tả Use-case “Quản lý thông tin sân”
4.13.1 Tóm tắt:
Cho phép Chủ sân thêm mới, xem, cập nhật hoặc xóa (hoặc ẩn) thông tin chi tiết về các sân thể thao mà họ quản lý.

4.13.2 Dòng sự kiện:
4.13.2.1 Dòng sự kiện chính (Thêm sân mới):
Chủ sân truy cập khu vực quản lý sân của mình.
Chủ sân chọn chức năng "Thêm sân mới".
Hệ thống hiển thị form nhập thông tin sân (Tên, Địa chỉ, Loại sân, Mô tả, Tiện ích, Giá, Chính sách hủy, Giờ hoạt động...).
Chủ sân nhập đầy đủ thông tin bắt buộc.
Chủ sân tải lên hình ảnh cho sân.
Chủ sân nhấn nút "Lưu" hoặc "Tạo sân".
Hệ thống kiểm tra tính hợp lệ của dữ liệu.
Hệ thống lưu thông tin sân mới vào CSDL, liên kết với tài khoản Chủ sân.
(Tùy chọn) Sân mới có thể cần Admin duyệt trước khi hiển thị công khai.
Hệ thống thông báo "Thêm sân thành công!".

4.13.2.2 Dòng sự kiện chính (Cập nhật sân):
Chủ sân truy cập khu vực quản lý sân.
Hệ thống hiển thị danh sách các sân Chủ sân đang quản lý.
Chủ sân chọn sân muốn cập nhật.
Hệ thống hiển thị thông tin hiện tại của sân và cho phép chỉnh sửa.
Chủ sân thay đổi thông tin, giá cả, hình ảnh, tiện ích...
Chủ sân nhấn nút "Lưu thay đổi".
Hệ thống kiểm tra tính hợp lệ của dữ liệu.
Hệ thống cập nhật thông tin sân trong CSDL.
Hệ thống thông báo "Cập nhật sân thành công!".

4.13.2.3 Dòng sự kiện khác (Xóa/Ẩn sân):
Chủ sân chọn sân và chọn chức năng "Xóa" hoặc "Ẩn".
Hệ thống yêu cầu xác nhận.
Nếu xác nhận, hệ thống thay đổi trạng thái của sân thành "đã xóa" hoặc "ẩn" (không hiển thị khi tìm kiếm). Dữ liệu có thể không bị xóa vật lý ngay lập tức.

4.13.3 Các yêu cầu đặc biệt:
Cần có hướng dẫn rõ ràng về thông tin cần nhập.
Quản lý hình ảnh hiệu quả (resize, giới hạn dung lượng).
Việc thay đổi giá hoặc chính sách có thể cần thông báo cho người đã đặt trước (nếu ảnh hưởng).

4.13.4 Trạng thái hệ thống khi bắt đầu thực hiện Use-case:
Chủ sân đã đăng nhập.

4.13.5 Trạng thái hệ thống sau khi thực hiện Use-case:
Danh sách và thông tin chi tiết các sân do Chủ sân quản lý được cập nhật trong hệ thống.

4.13.6 Điểm mở rộng:
Quản lý nhiều sân cùng lúc.
Sao chép thông tin từ sân đã có.
Thiết lập khuyến mãi cho sân.

4.14. Đặc tả Use-case “Quản lý lịch sân”
4.14.1 Tóm tắt:
Cho phép Chủ sân xem lịch đặt chi tiết của từng sân, đồng thời có thể chủ động khóa/mở các khung giờ hoặc thêm các ghi chú vào lịch.

4.14.2 Dòng sự kiện:
4.14.2.1 Dòng sự kiện chính (Xem lịch):
Chủ sân truy cập khu vực quản lý lịch sân.
Chủ sân chọn sân và khoảng thời gian (ngày/tuần) muốn xem.
Hệ thống hiển thị lịch dạng lưới hoặc danh sách, thể hiện rõ các khung giờ đã được đặt (có thể kèm tên người đặt), khung giờ trống, khung giờ bị khóa bởi Chủ sân.
Chủ sân có thể xem chi tiết một lượt đặt cụ thể.

4.14.2.2 Dòng sự kiện chính (Khóa/Mở khung giờ):
Chủ sân đang xem lịch (bước 3 ở trên).
Chủ sân chọn một hoặc nhiều khung giờ trống.
Chủ sân chọn chức năng "Khóa lịch" (ví dụ: để bảo trì, sự kiện riêng...).
(Tùy chọn) Chủ sân nhập lý do khóa lịch.
Hệ thống cập nhật trạng thái các khung giờ đó thành "bị khóa" và không cho phép Người thuê đặt.
Để mở lại, Chủ sân chọn khung giờ bị khóa và chọn "Mở lịch". Hệ thống cập nhật lại trạng thái thành "trống".

4.14.2.3 Dòng sự kiện khác (Thêm đặt chỗ thủ công):
Chủ sân có thể có tùy chọn thêm một lượt đặt thủ công (ví dụ: khách đặt qua điện thoại). Nhập thông tin người đặt, giờ và hệ thống ghi nhận như một lượt đặt bình thường.

4.14.3 Các yêu cầu đặc biệt:
Giao diện lịch trực quan, dễ thao tác.
Cập nhật trạng thái phải nhanh chóng để tránh xung đột.

4.14.4 Trạng thái hệ thống khi bắt đầu thực hiện Use-case:
Chủ sân đã đăng nhập.

4.14.5 Trạng thái hệ thống sau khi thực hiện Use-case:
Trạng thái lịch của sân (trống, bận, khóa) được cập nhật theo thao tác của Chủ sân.

4.14.6 Điểm mở rộng:
Xem lịch của nhiều sân cùng lúc.
Đồng bộ với lịch cá nhân (Google Calendar...).
Thêm ghi chú vào khung giờ cụ thể.

4.15. Đặc tả Use-case “Xem báo cáo doanh thu”
4.15.1 Tóm tắt:
Cho phép Chủ sân xem thống kê và báo cáo về doanh thu thu được từ việc cho thuê các sân của mình quản lý.

4.15.2 Dòng sự kiện:
4.15.2.1 Dòng sự kiện chính:
Chủ sân truy cập mục "Doanh thu" hoặc "Báo cáo".
Hệ thống mặc định hiển thị tổng quan doanh thu trong một khoảng thời gian nhất định (ví dụ: tháng này).
Chủ sân có thể chọn xem theo các khoảng thời gian khác (ngày, tuần, tháng, năm, tùy chỉnh).
Chủ sân có thể chọn xem báo cáo cho một sân cụ thể hoặc tất cả các sân.
Hệ thống truy vấn dữ liệu đặt sân và thanh toán đã hoàn thành.
Hệ thống hiển thị báo cáo bao gồm: Tổng doanh thu, số lượt đặt, doanh thu trung bình/lượt, có thể có biểu đồ minh họa xu hướng.
(Tùy chọn) Hệ thống cho phép xem danh sách chi tiết các giao dịch đã đóng góp vào doanh thu trong khoảng thời gian đã chọn.

4.15.3 Các yêu cầu đặc biệt:
Số liệu phải chính xác, chỉ tính các giao dịch đã thành công.
Biểu đồ (nếu có) phải rõ ràng, dễ hiểu.

4.15.4 Trạng thái hệ thống khi bắt đầu thực hiện Use-case:
Chủ sân đã đăng nhập.

4.15.5 Trạng thái hệ thống sau khi thực hiện Use-case:
Chủ sân đã xem được báo cáo doanh thu theo yêu cầu.

4.15.6 Điểm mở rộng:
Xuất báo cáo ra file (Excel, PDF).
So sánh doanh thu giữa các kỳ.
Phân tích doanh thu theo khung giờ, loại sân...

4.16. Đặc tả Use-case “Phản hồi hỗ trợ”
4.16.1 Tóm tắt:
Cho phép Chủ sân (hoặc Admin nếu yêu cầu được chuyển đến Admin) xem và trả lời các yêu cầu hỗ trợ được gửi từ Người thuê.

4.16.2 Dòng sự kiện:
4.16.2.1 Dòng sự kiện chính:
Chủ sân nhận được thông báo (email hoặc trong hệ thống) về yêu cầu hỗ trợ mới hoặc truy cập vào mục "Hỗ trợ" / "Tin nhắn".
Hệ thống hiển thị danh sách các yêu cầu hỗ trợ (mới, đang xử lý, đã đóng).
Chủ sân chọn một yêu cầu để xem chi tiết nội dung và thông tin người gửi.
Chủ sân soạn nội dung phản hồi.
Chủ sân nhấn nút "Gửi phản hồi".
Hệ thống lưu lại nội dung phản hồi và gửi thông báo đến Người thuê rằng yêu cầu đã được trả lời.
(Tùy chọn) Chủ sân có thể thay đổi trạng thái yêu cầu (ví dụ: thành "Đã giải quyết").

4.16.3 Các yêu cầu đặc biệt:
Cần lưu lại lịch sử trao đổi giữa Người thuê và Chủ sân/Admin.
Phân loại, đánh dấu ưu tiên cho yêu cầu hỗ trợ.

4.16.4 Trạng thái hệ thống khi bắt đầu thực hiện Use-case:
Chủ sân đã đăng nhập.
Có yêu cầu hỗ trợ từ Người thuê.

4.16.5 Trạng thái hệ thống sau khi thực hiện Use-case:
Yêu cầu hỗ trợ đã được phản hồi, thông báo được gửi đến Người thuê.

4.16.6 Điểm mở rộng:
Sử dụng template trả lời nhanh cho các câu hỏi thường gặp.
Chuyển yêu cầu cho Admin nếu không xử lý được.
Đánh giá mức độ hài lòng của Người thuê sau khi được hỗ trợ.

4.17. Đặc tả Use-case “Quản lý tài khoản người dùng”
4.17.1 Tóm tắt:
Cho phép Admin quản lý các tài khoản Người thuê và Chủ sân trong hệ thống (xem, tìm kiếm, khóa/mở khóa, xóa, xem chi tiết).

4.17.2 Dòng sự kiện:
4.17.2.1 Dòng sự kiện chính:
Admin đăng nhập vào khu vực quản trị.
Admin truy cập mục "Quản lý người dùng".
Hệ thống hiển thị danh sách tất cả người dùng (hoặc phân theo vai trò: Người thuê, Chủ sân) với các thông tin cơ bản (Tên, Email, SĐT, Vai trò, Trạng thái).
Admin có thể tìm kiếm người dùng theo tên, email, SĐT.
Admin có thể lọc người dùng theo vai trò, trạng thái (active/inactive).
Admin chọn một hoặc nhiều người dùng.
Admin thực hiện hành động:
Xem chi tiết: Xem đầy đủ thông tin tài khoản.
Khóa/Mở khóa: Thay đổi trạng thái active/inactive của tài khoản. Hệ thống cập nhật trạng thái.
Xóa tài khoản: Xóa tài khoản khỏi hệ thống (cần xác nhận, có thể là xóa mềm). Hệ thống cập nhật trạng thái.
(Tùy chọn) Đặt lại mật khẩu: Tạo mật khẩu tạm thời cho người dùng.

4.17.3 Các yêu cầu đặc biệt:
Cần có cơ chế xác nhận trước khi thực hiện các hành động nguy hiểm như khóa/xóa.
Admin không thể xóa tài khoản của chính mình.
Việc xóa tài khoản cần xem xét các dữ liệu liên quan (lịch sử đặt sân, đánh giá...).

4.17.4 Trạng thái hệ thống khi bắt đầu thực hiện Use-case:
Admin đã đăng nhập.

4.17.5 Trạng thái hệ thống sau khi thực hiện Use-case:
Thông tin hoặc trạng thái của (các) tài khoản người dùng được chọn đã được cập nhật trong hệ thống.

4.17.6 Điểm mở rộng:
Phân quyền chi tiết hơn cho Admin (ví dụ: Admin chỉ quản lý người dùng, Admin quản lý nội dung...).
Xem lịch sử hoạt động của người dùng.
Gửi thông báo hàng loạt cho người dùng.

4.18. Đặc tả Use-case “Quản lý sân (Admin)”
4.18.1 Tóm tắt:
Cho phép Admin xem, tìm kiếm, duyệt (nếu cần), chỉnh sửa, khóa hoặc xóa bất kỳ sân nào trên toàn hệ thống.

4.18.2 Dòng sự kiện:
4.18.2.1 Dòng sự kiện chính:
Admin đăng nhập vào khu vực quản trị.
Admin truy cập mục "Quản lý sân".
Hệ thống hiển thị danh sách tất cả các sân trên hệ thống với thông tin cơ bản (Tên sân, Chủ sân, Địa chỉ, Trạng thái).
Admin có thể tìm kiếm sân theo tên, địa chỉ, tên chủ sân.
Admin có thể lọc sân theo trạng thái (Chờ duyệt, Đang hoạt động, Bị khóa...).
Admin chọn một sân.
Admin thực hiện hành động:
Xem chi tiết: Xem đầy đủ thông tin sân.
Duyệt/Từ chối: (Nếu có quy trình duyệt) Thay đổi trạng thái sân từ "Chờ duyệt" thành "Đang hoạt động" hoặc "Bị từ chối".
Khóa/Mở khóa: Tạm ngưng/cho phép hiển thị và đặt sân này.
Chỉnh sửa: Chỉnh sửa thông tin chi tiết của sân (có thể cần thông báo cho Chủ sân).
Xóa sân: Xóa thông tin sân khỏi hệ thống (cần xác nhận).

4.18.3 Các yêu cầu đặc biệt:
Cần có xác nhận cho các hành động khóa/xóa.
Lưu vết các thay đổi do Admin thực hiện.

4.18.4 Trạng thái hệ thống khi bắt đầu thực hiện Use-case:
Admin đã đăng nhập.

4.18.5 Trạng thái hệ thống sau khi thực hiện Use-case:
Thông tin hoặc trạng thái của sân được chọn đã được cập nhật trong hệ thống.

4.18.6 Điểm mở rộng:
Gán sân cho Chủ sân khác.
Xem lịch sử đặt của một sân bất kỳ.

4.19. Đặc tả Use-case “Xem báo cáo hệ thống”
4.19.1 Tóm tắt:
Cho phép Admin xem các báo cáo tổng hợp về hoạt động và tình hình của toàn bộ hệ thống đặt sân.

4.19.2 Dòng sự kiện:
4.19.2.1 Dòng sự kiện chính:
Admin đăng nhập vào khu vực quản trị.
Admin truy cập mục "Báo cáo hệ thống" hoặc "Thống kê".
Hệ thống hiển thị các loại báo cáo có sẵn (ví dụ: Tổng số người dùng mới, Tổng số sân mới, Tổng số lượt đặt, Tổng doanh thu hệ thống (nếu có phí hoa hồng), Các sân được đặt nhiều nhất, Phản hồi/Đánh giá gần đây...).
Admin chọn loại báo cáo và khoảng thời gian muốn xem.
Hệ thống truy vấn, tổng hợp dữ liệu và hiển thị báo cáo dưới dạng bảng biểu hoặc biểu đồ.

4.19.3 Các yêu cầu đặc biệt:
Số liệu báo cáo phải chính xác và được cập nhật định kỳ.
Cần phân quyền xem báo cáo nếu có nhiều cấp Admin.

4.19.4 Trạng thái hệ thống khi bắt đầu thực hiện Use-case:
Admin đã đăng nhập.

4.19.5 Trạng thái hệ thống sau khi thực hiện Use-case:
Admin đã xem được các thông tin báo cáo, thống kê về hệ thống.

4.19.6 Điểm mở rộng:
Xuất báo cáo ra file.
Tùy chỉnh các loại báo cáo.
Báo cáo về hiệu suất hệ thống, lỗi.